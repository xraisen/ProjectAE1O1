<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VMC Strategic HONEST: Comprehensive Analysis vs Canteen Canada</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #fafaf9 0%, #f5f5f4 100%);
            color: #292524;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f5f5f4; 
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #d97706, #92400e);
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(45deg, #92400e, #d97706);
        }

        .card-shadow {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .transition-all-300 {
            transition: all 0.3s ease-in-out;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            height: 300px;
            max-height: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        .nav-btn.active {
            background: linear-gradient(45deg, #292524, #1c1917);
            color: #ffffff;
        }
        
        .ad-copy-preview {
            border: 2px solid #3b82f6;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
        }
        .ad-url {
            color: #16a34a;
            font-weight: 500;
        }
        .ad-headline {
            color: #1d4ed8;
            font-weight: 700;
        }

        .vmc-accent { 
            background: linear-gradient(45deg, #d97706, #f59e0b);
        }
        .battle-line {
            border-left: 4px solid #d97706;
            padding-left: 1rem;
        }

        .wow-gradient {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn-enhanced {
            background: linear-gradient(45deg, #d97706, #f59e0b);
            color: white;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn-enhanced:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(217, 119, 6, 0.3);
        }

        .section-title {
            text-align: center;
            background: linear-gradient(45deg, #292524, #1c1917);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>

</head>
<body class="antialiased selection:bg-stone-200 selection:text-stone-900">

    <!-- Navigation / Header -->
    <header class="bg-white border-b border-stone-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-xl font-bold tracking-tight text-stone-900">VMC Strategic HONEST: Dislodging Canteen Canada</h1>
                <p class="text-xs text-stone-500 uppercase tracking-wide">Prepared by Jose Espinosa for Vending Machine Canada (Evan the Owner)</p>
            </div>
            <nav class="hidden md:flex space-x-1">
                <button onclick="scrollToSection('landscape')" class="px-3 py-2 text-sm font-medium text-stone-600 hover:text-stone-900 rounded-md transition-colors">Competitors</button>
                <button onclick="scrollToSection('weakness')" class="px-3 py-2 text-sm font-medium text-stone-600 hover:text-stone-900 rounded-md transition-colors">Weaknesses</button>
                <button onclick="scrollToSection('search')" class="px-3 py-2 text-sm font-medium text-stone-600 hover:text-stone-900 rounded-md transition-colors">Search Terms</button>
                <button onclick="scrollToSection('ppc')" class="px-3 py-2 text-sm font-medium text-stone-600 hover:text-stone-900 rounded-md transition-colors">PPC Strategy</button>
                <button onclick="scrollToSection('insights')" class="px-3 py-2 text-sm font-medium text-stone-600 hover:text-stone-900 rounded-md transition-colors">Insights</button>
            </nav>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-16">

        <!-- Introduction Section -->
        <section class="text-center max-w-3xl mx-auto space-y-4">
            <h2 class="text-3xl font-bold text-stone-800">Strategic Intelligence Dashboard: Analyzing and Countering Canteen Canada</h2>
            <p class="text-lg text-stone-600 leading-relaxed">
                This comprehensive report analyzes Canteen Canada's market positioning, decodes their search terms, and reverse-engineers their strategies. Based on the 2025 source analysis, we provide Vending Machine Canada (VMC) with aggressive counter-strategies to exploit weaknesses and dominate key segments.
            </p>
            <div class="flex flex-wrap justify-center gap-2 mt-4">
                <span class="bg-stone-100 text-stone-600 px-3 py-1 rounded-full text-sm font-medium">Competitor Analysis</span>
                <span class="bg-stone-100 text-stone-600 px-3 py-1 rounded-full text-sm font-medium">Search Term Strategy</span>
                <span class="bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm font-medium">VMC Counter-Strategy</span>
                <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium">Exploiting Weaknesses</span>
            </div>
        </section>

        <!-- COMPETITOR LANDSCAPE SECTION -->
        <section id="landscape" class="scroll-mt-24 animate-fade-in">
            <div class="mb-6">
                <h3 class="text-3xl font-bold text-stone-800 section-title">1. Competitor Landscape: Canteen & Peers</h3>
                <p class="text-stone-600 mt-2 text-center">
                    Overview of national operators, regional specialists, and niche players in the Canadian vending market, with market share projections and strategic focuses.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left: Controls & Chart -->
                <div class="lg:col-span-1 space-y-6 lg:sticky lg:top-6 lg:self-start">
                    <div class="bg-white p-6 rounded-xl card-shadow border border-stone-100">
                        <h4 class="font-semibold text-stone-700 mb-6 uppercase text-sm">Market Breakdown</h4>
                        <div class="chart-container">
                            <canvas id="competitorChart"></canvas>
                        </div>
                    </div>
                    <div class="space-y-3">
                        <button onclick="filterCompetitors('All')" class="comp-filter-btn w-full text-left px-4 py-3 rounded-lg bg-stone-800 text-white transition-all">All Types</button>
                        <button onclick="filterCompetitors('National Operator')" class="comp-filter-btn w-full text-left px-4 py-3 rounded-lg bg-white text-stone-600 border border-stone-200 hover:bg-stone-50 transition-all">National Operators</button>
                        <button onclick="filterCompetitors('Regional Specialist')" class="comp-filter-btn w-full text-left px-4 py-3 rounded-lg bg-white text-stone-600 border border-stone-200 hover:bg-stone-50 transition-all">Regional Specialists</button>
                        <button onclick="filterCompetitors('Niche/Healthy')" class="comp-filter-btn w-full text-left px-4 py-3 rounded-lg bg-white text-stone-600 border border-stone-200 hover:bg-stone-50 transition-all">Niche/Healthy</button>
                        <button onclick="filterCompetitors('Manufacturer')" class="comp-filter-btn w-full text-left px-4 py-3 rounded-lg bg-white text-stone-600 border border-stone-200 hover:bg-stone-50 transition-all">Manufacturers</button>
                        <button onclick="filterCompetitors('Distributor')" class="comp-filter-btn w-full text-left px-4 py-3 rounded-lg bg-white text-stone-600 border border-stone-200 hover:bg-stone-50 transition-all">Distributors</button>
                    </div>
                </div>

                <!-- Right: Competitor Cards Grid -->
                <div class="lg:col-span-2">
                    <div id="competitorGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4 h-[500px] overflow-y-auto pr-4">
                        <!-- Cards populated by JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- WEAKNESS BATTLE CARD SECTION -->
        <section id="weakness" class="scroll-mt-24 animate-fade-in">
            <h3 class="text-3xl font-bold mb-8 text-stone-800">2. Canteen Canada Weakness Battle Card</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white p-6 rounded-xl card-shadow border border-red-100">
                    <h4 class="font-bold text-red-600 mb-3 uppercase tracking-tighter">Weakness: Price Gouging</h4>
                    <p class="text-sm text-stone-600 mb-4 leading-relaxed">Consumers report spending $2.59 for a soda at Canteen kiosks vs $1.75 elsewhere. This "price gouging" sentiment is a major friction point.</p>
                    <div class="bg-red-50 p-3 rounded text-xs font-bold text-red-800 italic">VMC Counter: "Transparent, Fair-Market Pricing."</div>
                </div>
                <div class="bg-white p-6 rounded-xl card-shadow border border-red-100">
                    <h4 class="font-bold text-red-600 mb-3 uppercase tracking-tighter">Weakness: The Bottler Trap</h4>
                    <p class="text-sm text-stone-600 mb-4 leading-relaxed">Canteen's reliance on bottler-owned machines limits machine variety and restricts snacks to national brands only.</p>
                    <div class="bg-red-50 p-3 rounded text-xs font-bold text-red-800 italic">VMC Counter: "Ultimate Variety—Unrestricted Selection."</div>
                </div>
                <div class="bg-white p-6 rounded-xl card-shadow border border-red-100">
                    <h4 class="font-bold text-red-600 mb-3 uppercase tracking-tighter">Weakness: Small Account Friction</h4>
                    <p class="text-sm text-stone-600 mb-4 leading-relaxed">Locations often charge a "service fee" just to have Canteen. Small-to-mid accounts are neglected in favor of mega-contracts.</p>
                    <div class="bg-red-50 p-3 rounded text-xs font-bold text-red-800 italic">VMC Counter: "No-Fee Service for Local Businesses."</div>
                </div>
            </div>
        </section>

        <!-- SEARCH TERM ANALYSIS SECTION -->
        <section id="search" class="scroll-mt-24">
            <div class="mb-6">
                <h3 class="text-2xl font-bold text-stone-800">3. Canteen's Search Term Strategy (Reverse-Engineered)</h3>
                <p class="text-stone-600 mt-2">
                    Analysis of high-value search terms Canteen targets, categorized by intent, with VMC counter-strategies.
                </p>
            </div>

            <div class="bg-white rounded-xl card-shadow border border-stone-100 overflow-hidden">
                <!-- Tabs -->
                <div class="flex overflow-x-auto border-b border-stone-100 bg-stone-50">
                    <button onclick="loadSearchCategory('brand')" class="search-tab active px-8 py-5 text-sm font-bold text-stone-500 hover:text-stone-900 border-b-2 border-transparent focus:outline-none" data-cat="brand">Brand + Service Intent</button>
                    <button onclick="loadSearchCategory('commercial')" class="search-tab px-8 py-5 text-sm font-bold text-stone-500 hover:text-stone-900 border-b-2 border-transparent focus:outline-none" data-cat="commercial">Commercial / Purchase Intent</button>
                    <button onclick="loadSearchCategory('local')" class="search-tab px-8 py-5 text-sm font-bold text-stone-500 hover:text-stone-900 border-b-2 border-transparent focus:outline-none" data-cat="local">Location + Local SEO</button>
                    <button onclick="loadSearchCategory('tech')" class="search-tab px-8 py-5 text-sm font-bold text-stone-500 hover:text-stone-900 border-b-2 border-transparent focus:outline-none" data-cat="tech">Feature / Technology</button>
                    <button onclick="loadSearchCategory('related')" class="search-tab px-8 py-5 text-sm font-bold text-stone-500 hover:text-stone-900 border-b-2 border-transparent focus:outline-none" data-cat="related">Related Services</button>
                    <button onclick="loadSearchCategory('generic')" class="search-tab px-8 py-5 text-sm font-bold text-stone-500 hover:text-stone-900 border-b-2 border-transparent focus:outline-none" data-cat="generic">Generic Service Terms</button>
                </div>

                <div class="p-6 grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                    <div>
                        <h4 id="searchCatTitle" class="text-2xl font-bold text-stone-800">Brand + Service Intent</h4>
                        <p id="searchCatDesc" class="text-stone-500 mt-2"></p>
                        <div id="searchTermList" class="mt-4 space-y-2"></div>
                    </div>
                    <div class="chart-container">
                        <canvas id="searchChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- PPC COUNTER-STRATEGY SECTION -->
        <section id="ppc" class="scroll-mt-24">
            <div class="mb-6">
                <h3 class="text-2xl font-bold text-stone-800">4. VMC's Aggressive PPC Counter-Strategy</h3>
                <p class="text-stone-600 mt-2">
                    Tailored PPC campaigns to attack Canteen's weaknesses, with AI-generated ad copy for high-conversion targeting.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <!-- Sidebar Controls -->
                <div class="md:col-span-1 space-y-3">
                    <button onclick="renderPPC('brand_attack')" class="ppc-btn w-full text-left px-5 py-4 rounded-xl text-sm font-bold bg-stone-900 text-white shadow-xl transition-all hover:scale-105" data-key="brand_attack">Competitor Brand Attack</button>
                    <button onclick="renderPPC('local_dominance')" class="ppc-btn w-full text-left px-5 py-4 rounded-xl text-sm font-bold bg-white text-stone-800 border border-stone-200 hover:bg-stone-50 transition-all" data-key="local_dominance">Local Service Dominance</button>
                    <button onclick="renderPPC('healthy_disruption')" class="ppc-btn w-full text-left px-5 py-4 rounded-xl text-sm font-bold bg-white text-stone-800 border border-stone-200 hover:bg-stone-50 transition-all" data-key="healthy_disruption">Healthy Niche Disruption</button>
                    <button onclick="renderPPC('quality_focus')" class="ppc-btn w-full text-left px-5 py-4 rounded-xl text-sm font-bold bg-white text-stone-800 border border-stone-200 hover:bg-stone-50 transition-all" data-key="quality_focus">Service Quality Focus</button>
                    <button onclick="renderPPC('mro_industrial')" class="ppc-btn w-full text-left px-5 py-4 rounded-xl text-sm font-bold bg-white text-stone-800 border border-stone-200 hover:bg-stone-50 transition-all" data-key="mro_industrial">Industrial MRO Edge</button>
                </div>

                <!-- Dynamic Content Area -->
                <div class="md:col-span-3">
                    <div id="ppcContent" class="bg-white rounded-2xl card-shadow p-8 border border-stone-100 h-full transition-all duration-300">
                        <!-- Content populated by JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- NON-BRANDED PPC STRATEGY SECTION -->
        <section id="nonbranded" class="scroll-mt-24">
            <div class="mb-8">
                <h3 class="text-3xl font-bold text-stone-800">4.5 Non-Branded High-Intent PPC Strategy</h3>
                <p class="text-stone-600 mt-2">
                    Targeting solution-focused search terms that bypass competitor names, capturing clients defining their vending needs.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <!-- Sidebar Controls -->
                <div class="md:col-span-1 space-y-3">
                    <button onclick="renderNonBranded('commercial_intent')" class="nonbranded-btn w-full text-left px-4 py-3 rounded-lg text-sm font-medium bg-stone-800 text-white shadow-md transition-all hover:scale-105" data-key="commercial_intent">Commercial & Corporate Solutions</button>
                    <button onclick="renderNonBranded('local_geo_target')" class="nonbranded-btn w-full text-left px-4 py-3 rounded-lg text-sm font-medium bg-white text-stone-800 border border-stone-200 hover:bg-stone-50 transition-all" data-key="local_geo_target">Local Service Geo-Targeting</button>
                    <button onclick="renderNonBranded('product_niche')" class="nonbranded-btn w-full text-left px-4 py-3 rounded-lg text-sm font-medium bg-white text-stone-800 border border-stone-200 hover:bg-stone-50 transition-all" data-key="product_niche">Healthy & Specialty Niche</button>
                </div>

                <!-- Dynamic Content Area -->
                <div class="md:col-span-3">
                    <div id="nonBrandedContent" class="bg-white rounded-xl card-shadow p-8 border border-stone-100 h-full flex flex-col justify-center transition-all duration-300">
                        <p class="text-stone-400">Select a campaign strategy on the left to review its keywords and generate the ad copy.</p>
                    </div>
                </div>
            </div>

            <div class="mt-8 max-w-4xl mx-auto p-8 bg-white rounded-2xl border border-stone-200 shadow-lg">
                <h4 class="text-2xl font-bold text-stone-800 mb-4">Strategic Conclusion: Own the Solution Search</h4>
                <p class="text-stone-600 leading-relaxed">
                    By focusing on these non-branded terms, VMC bypasses the pricing wars of the national operators and enters the conversation when clients are still defining their needs. The generated ad copy will emphasize VMC's superior variety, rapid local service, and fair pricing—the exact weaknesses Canteen's national contracts prevent them from addressing.
                </p>
                <div class="mt-4 p-4 bg-amber-50 rounded-lg border-l-4 border-amber-600 text-sm text-amber-800 italic">
                    Next Step: Deploy these ad groups, monitor Quality Scores, and use the 'City' terms to target your immediate service radius aggressively.
                </div>
            </div>
        </section>

        <!-- INSIGHTS & ROADMAP SECTION -->
        <section id="insights" class="scroll-mt-24 mb-12">
            <div class="bg-stone-800 rounded-2xl p-8 md:p-12 text-white">
                <div class="mb-8">
                    <h3 class="text-3xl font-bold mb-4">5. Strategic Insights & 2025 Roadmap</h3>
                    <p class="text-stone-300 leading-relaxed">
                        Key takeaways from the analysis, with actionable recommendations for VMC to capitalize on market opportunities and counter Canteen effectively.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                    <div class="bg-stone-700 p-6 rounded-xl">
                        <h4 class="text-xl font-bold text-amber-400 mb-3">Market Opportunities</h4>
                        <ul class="space-y-3 text-stone-200">
                            <li class="flex items-start gap-3">
                                <span class="text-amber-500 font-bold mt-1">▶</span>
                                <span><strong>Industrial Growth:</strong> MRO & PPE vending at 14.55% CAGR. Canteen slow to adapt.</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-amber-500 font-bold mt-1">▶</span>
                                <span><strong>Variety Gap:</strong> 65% expect café-quality coffee. Canteen's deals limit selection.</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-amber-500 font-bold mt-1">▶</span>
                                <span><strong>Response Speed:</strong> Regional rivals promise 20-minute response. VMC must out-service Canteen's lag.</span>
                            </li>
                        </ul>
                    </div>
                    <div class="bg-stone-700 p-6 rounded-xl">
                        <h4 class="text-xl font-bold text-amber-400 mb-3">Competitive Advantages</h4>
                        <ul class="space-y-3 text-stone-200">
                            <li class="flex items-start gap-3">
                                <span class="text-amber-500 font-bold mt-1">▶</span>
                                <span><strong>Local Ownership:</strong> Personalized service vs. national anonymity.</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-amber-500 font-bold mt-1">▶</span>
                                <span><strong>Freshness Focus:</strong> Curated, healthy selections with no restrictions.</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-amber-500 font-bold mt-1">▶</span>
                                <span><strong>Fast Service:</strong> 4-hour response times and transparent pricing.</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="relative">
                    <h4 class="text-2xl font-bold mb-6 text-amber-400">The Research Journey & Roadmap</h4>
                    <div class="space-y-8 relative before:absolute before:left-2 before:top-2 before:bottom-2 before:w-0.5 before:bg-amber-600/30">
                        <div class="pl-8 relative">
                            <div class="absolute left-0 top-1 w-4 h-4 rounded-full bg-amber-600"></div>
                            <h5 class="font-bold text-amber-500 uppercase text-xs tracking-widest mb-1">Step 1: Macro-Economic Analysis</h5>
                            <p class="text-stone-400 text-sm">Analyzed North American vending market (reaching $104B by 2033) and discovered Canada as fastest-growing territory, with Industrial Vending leading at 14.55% CAGR.</p>
                        </div>
                        <div class="pl-8 relative">
                            <div class="absolute left-0 top-1 w-4 h-4 rounded-full bg-amber-600"></div>
                            <h5 class="font-bold text-amber-500 uppercase text-xs tracking-widest mb-1">Step 2: Competitive Forensics</h5>
                            <p class="text-stone-400 text-sm">Deep-dived into Canteen and Aramark's financials and complaints. Identified "Bottler Trap" and "Price Gouging" as primary attack vectors.</p>
                        </div>
                        <div class="pl-8 relative">
                            <div class="absolute left-0 top-1 w-4 h-4 rounded-full bg-amber-600"></div>
                            <h5 class="font-bold text-amber-500 uppercase text-xs tracking-widest mb-1">Step 3: Strategic Conclusion</h5>
                            <p class="text-stone-400 text-sm">Three-pillar strategy: Attack on Variety, Attack on Pricing Transparency, and Aggressive Pivot to MRO/Industrial Vending.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- ADDITIONAL INSIGHTS SECTION -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 wow-gradient animate-fade-in">
        <h2 class="text-4xl font-bold text-stone-800 mb-8 text-center">Additional Strategic Insights from Source Analysis</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
            <div class="space-y-6">
                <h3 class="text-2xl font-bold text-stone-800">Technological Integration: The 2025 Connected Hub Model</h3>
                <p class="text-stone-600">Vending machines are evolving into intelligent, connected retail hubs powered by IoT, cloud connectivity, and smart sensors for real-time management. Features include AI-powered recommendations, biometrics, and energy-saving modes.</p>
                <ul class="space-y-2 text-stone-700">
                    <li>• IoT and Remote Management (SmartService)</li>
                    <li>• Cashless and Contactless Payment Ecosystems</li>
                    <li>• AI, Biometrics, and Interactive Interfaces</li>
                </ul>
            </div>
            
            <div class="space-y-6">
                <h3 class="text-2xl font-bold text-stone-800">Consumer Psychology and Sustainability Paradox</h3>
                <p class="text-stone-600">2025 consumers prioritize wellness and sustainability but are price-sensitive. ESG standards are key, with demand for low-sugar snacks, plant-based products, and transparent eco-friendly practices.</p>
                <ul class="space-y-2 text-stone-700">
                    <li>• Sustainability vs. Inflation Sensitivity</li>
                    <li>• Wellness Shift and Better-For-You Demand</li>
                    <li>• Value of the Breakroom Experience</li>
                </ul>
            </div>
        </div>
        
        <div class="mt-12 bg-white p-8 rounded-2xl card-shadow">
            <h3 class="text-2xl font-bold text-stone-800 mb-4">Strategic Conclusions and 2025 Action Plan</h3>
            <ul class="space-y-4 text-stone-600">
                <li><strong>Aggressive Industrial Expansion:</strong> Capitalize on 14.55% CAGR in industrial vending for MRO and PPE solutions.</li>
                <li><strong>Defending Fresh Food Niche:</strong> Counter Daily Blends with HACCP-approved safety and supply chain advantages.</li>
                <li><strong>Topical Dominance in SEO:</strong> Focus on "Unattended Retail" and "Breakroom Wellness" for authority.</li>
                <li><strong>Bilingual and Regional Personalization:</strong> Localized pages for Quebec and other regions.</li>
                <li><strong>PPC Optimization:</strong> AI-driven bidding for conversion value, targeting seasonal peaks.</li>
            </ul>
        </div>
    </section>

    <!-- FUTURE OUTLOOK SECTION -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 bg-gradient-to-br from-amber-50 to-stone-100 animate-fade-in">
        <h2 class="text-4xl font-bold text-stone-800 mb-8 text-center">Vending Machine Market Trajectory: Key Strategic Insights (2026 & Beyond)</h2>
        
        <div class="mb-12">
            <p class="text-lg text-stone-600 text-center max-w-3xl mx-auto">
                The market is evolving thoughtfully, with opportunities for innovation. The trajectory highlights a positive shift toward <strong>sophisticated unattended retail</strong> in high-value commercial sectors, while traditional vending adapts to new efficiencies.
            </p>
        </div>

        <div class="mb-12">
            <h3 class="text-3xl font-bold text-stone-800 mb-6">1. Evolving Traditional Vending: Market Opportunities</h3>
            <p class="text-stone-600 mb-8">The industry is thoughtfully segmenting based on technological advancement and enhanced service models.</p>
            
            <div class="overflow-x-auto">
                <table class="w-full bg-white rounded-xl card-shadow border border-stone-200">
                    <thead class="bg-stone-100">
                        <tr>
                            <th class="px-6 py-4 text-left text-sm font-bold text-stone-800">Market Insight</th>
                            <th class="px-6 py-4 text-left text-sm font-bold text-stone-800">Opportunity for VMC</th>
                            <th class="px-6 py-4 text-left text-sm font-bold text-stone-800">Recommended Action</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-stone-200">
                        <tr>
                            <td class="px-6 py-4 text-stone-700"><strong>Traditional Vending is Evolving</strong><br>Coil and glass-front machines (without advanced telemetry) are becoming less competitive. They offer limited consumer appeal and higher operational costs due to manual processes. <strong>Modernizing this segment presents growth potential by 2030.</strong></td>
                            <td class="px-6 py-4 text-stone-700">VMC can thoughtfully <strong>transition or upgrade machines to smart/non-telemetry models</strong>. Consider phasing out outdated hardware strategically.</td>
                            <td class="px-6 py-4 text-stone-700">VMC should evaluate and upgrade machines to smart models. Pause new purchases of non-integrated hardware.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-stone-700"><strong>Micro Markets as Standard</strong><br>Micro Markets (open shelving, self-checkout kiosks) are becoming essential for B2B clients with over 50 employees. Clients value them as convenient amenities, enhancing satisfaction and transaction values.</td>
                            <td class="px-6 py-4 text-stone-700"><strong>VMC sales can focus on Micro Market solutions.</strong> Assess site suitability for optimal deployment.</td>
                            <td class="px-6 py-4 text-stone-700">Prioritize Micro Market offerings in sales. Evaluate sites for Micro Market feasibility.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-stone-700"><strong>Industrial Vending Growth</strong><br>Industrial/MRO vending offers high-margin, stable B2B opportunities, less affected by consumer trends. It's an efficient logistics solution with room for expansion.</td>
                            <td class="px-6 py-4 text-stone-700"><strong>VMC can develop a specialized sales approach for Industrial Vending.</strong> This provides steady growth during transitions.</td>
                            <td class="px-6 py-4 text-stone-700">Build a dedicated team for Industrial Vending. Use it as a growth foundation.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="mb-12">
            <h3 class="text-3xl font-bold text-stone-800 mb-6">2. Competitive Landscape: Opportunities with National Operators</h3>
            <p class="text-stone-600 mb-8">National operators bring scale advantages, but there are meaningful opportunities for focused, local excellence.</p>
            
            <div class="overflow-x-auto">
                <table class="w-full bg-white rounded-xl card-shadow border border-stone-200">
                    <thead class="bg-stone-100">
                        <tr>
                            <th class="px-6 py-4 text-left text-sm font-bold text-stone-800">Competitive Dynamics</th>
                            <th class="px-6 py-4 text-left text-sm font-bold text-stone-800">VMC's Strategic Response</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-stone-200">
                        <tr>
                            <td class="px-6 py-4 text-stone-700"><strong>Scale Advantages</strong><br>National operators can leverage their size for pricing and investment in new technologies. This creates competitive pressure but also opportunities in underserved segments.</td>
                            <td class="px-6 py-4 text-stone-700">Focus on the 25-100 employee B2B segment where national operators may have higher overhead. Build strong local relationships.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-stone-700"><strong>Supply Chain Efficiency</strong><br>Large operators benefit from volume discounts, but this can limit variety and responsiveness to local preferences.</td>
                            <td class="px-6 py-4 text-stone-700">Highlight VMC's flexible variety and quick local service as key differentiators.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-stone-700"><strong>Technology Investment</strong><br>National players are advancing with cashless and telemetry systems, setting industry standards.</td>
                            <td class="px-6 py-4 text-stone-700">Prioritize data-driven operations and demonstrate smart, efficient service to clients.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="bg-stone-800 p-8 rounded-2xl text-white">
            <h3 class="text-3xl font-bold mb-6">3. Key Action Items for VMC (2026 Priorities)</h3>
            <p class="text-stone-300 mb-6">To thrive in the evolving market, VMC can focus on these constructive steps:</p>
            <ul class="space-y-4 text-stone-200">
                <li><strong>Emphasize Execution Excellence:</strong> Concentrate on serving the 25-100 employee B2B segment effectively, building on local strengths.</li>
                <li><strong>Establish Local Leadership:</strong> Strengthen presence in your service area through targeted marketing and community engagement.</li>
                <li><strong>Leverage Data Wisely:</strong> Use usage data to optimize inventory and demonstrate value to clients.</li>
                <li><strong>Lead with Innovation:</strong> Position VMC as a provider of modern Micro Market and break room solutions.</li>
            </ul>
            <div class="mt-6 p-4 bg-amber-600 rounded-lg">
                <p class="text-amber-100 italic">The vending market is embracing high-tech logistics. VMC's local agility and personalized service can create lasting competitive advantages.</p>
            </div>
        </div>
    </section>

    <!-- AI GENERATED BRUTALLY HONEST SUMMARY SECTION -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 bg-gradient-to-br from-red-50 to-stone-100 animate-fade-in">
        <h2 class="text-4xl font-bold text-stone-800 mb-8 text-center">Generate Honest Summary</h2>
        
        <div class="max-w-4xl mx-auto">
            <div id="brutallyHonestSummaryResult" class="bg-white p-8 rounded-2xl card-shadow text-center">
                <p class="text-stone-400 italic">Click "Generate Brutally Honest Executive Summary" below to populate this section with 100% fact-based analysis.</p>
            </div>
            <button onclick="generateExecutiveSummary()" class="mt-6 w-full py-3 btn-enhanced font-bold rounded-xl">
                Generate Honest Executive Summary
            </button>
            <button onclick="testApiConnection()" class="mt-3 w-full py-2 bg-gray-500 hover:bg-gray-600 text-white font-medium rounded-xl transition-all">
                Test API Connection
            </button>
        </div>
    </section>

    <!-- SOURCES SECTION -->
    <section class="bg-stone-100 py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-stone-800 mb-8 text-center">Sources and References</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-stone-600">
                <ol class="space-y-2">
                    <li>1. Canada Retail Vending Machine Market Size & Outlook, 2033 - Grand View Research <a href="https://www.grandviewresearch.com/horizon/outlook/retail-vending-machine-market/canada" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>2. North America Industrial Vending Machine Market Size, Growth 2025-2030 <a href="https://www.mordorintelligence.com/industry-reports/north-america-industrial-vending-machine-market" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>3. AI Smart Vending Machine System Insightful Analysis: Trends, Competitor Dynamics, and Opportunities 2025-2033 <a href="https://www.archivemarketresearch.com/reports/ai-smart-vending-machine-system-215275" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>4. Vending Machine Market Report 2025: Automation Trends & Forecasts 2024-2033 <a href="https://www.businesswire.com/news/home/20250918424691/en/Vending-Machine-Market-Report-2025-Automation-Trends-Forecasts-2024-2033---Ready-to-Eat-Demand-Cashless-Payments-and-AI-Powered-Technologies-Propel-Global-Growth---ResearchAndMarkets.com" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>5. News - Aramark <a href="https://www.aramark.ca/newsroom/news" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>6. Climate Impact - Aramark <a href="https://www.aramark.com/about-us/environmental-social-governance/climate-impact" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>7. What is Competitive Landscape of Aramark Company? - Matrix BCG <a href="https://matrixbcg.com/blogs/competitors/aramark" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>8. What is Growth Strategy and Future Prospects of Aramark Company? - Matrix BCG <a href="https://matrixbcg.com/blogs/growth-strategy/aramark" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>9. Full Year and Q4 Fiscal 2025 Earnings Results - Aramark Investor Relations <a href="https://aramark.gcs-web.com/static-files/0ec7ebfa-cb46-4a9c-9269-eaadb2d1c2d8" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>10. Aramark Competitors: 5 Companies Similar to Aramark - P3 Cost Analysts <a href="https://www.costanalysts.com/aramark-competitors/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>11. Is Aramark as bad as its reputation? : r/KitchenConfidential - Reddit <a href="https://www.reddit.com/r/KitchenConfidential/comments/197ijcw/is_aramark_as_bad_as_its_reputation/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>12. Aramark? Has anyone had any positive, negative or experiences otherwise - Reddit <a href="https://www.reddit.com/r/KitchenConfidential/comments/108cexo/aramark_has_anyone_had_any_positive_negative_or/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>13. Top 15 Aramark Competitors and Alternatives in 2025 - Consainsights <a href="https://www.consainsights.com/company-profile/aramark/competitors" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>14. Aramark Competitors and Alternatives - Owler <a href="https://www.owler.com/company/aramark/competitors" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>15. North America Micro Industry Analysis Report 2023 Featuring - GlobeNewswire <a href="https://www.globenewswire.com/news-release/2023/08/21/2728742/28124/en/North-America-Micro-Industry-Analysis-Report-2023-Featuring-Major-Players-Compass-Aramark-Sodexo-365-Retail-Markets-Five-Star-Food-Service-Canteen-24-Seven-Avanti-Markets-and-USCon.html" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>16. Vending - Canteen - Food Service Solutions <a href="https://www.canteen.com/vending/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>17. Adaria | Vending Machines and Micromarkets throughout Canada <a href="https://www.adaria.ca/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>18. Top 100 Smart Vending Machine Manufacturers in Canada (2025) - ensun <a href="https://ensun.io/search/smart-vending-machine/canada" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>19. Top 100 Vending Machine Companies in Canada (2025) - ensun <a href="https://ensun.io/search/vending-machine/canada" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>20. Daily Blends raises $2.7 million CAD, signs Metrolinx deal - BetaKit <a href="https://betakit.com/daily-blends-raises-2-7-million-cad-signs-metrolinx-deal-to-deploy-smart-vending-machines/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>21. Daily Blends Launches AI-Powered Fresh Food Vending Machines - GlobeNewswire <a href="https://www.globenewswire.com/news-release/2023/03/07/2621774/0/en/Daily-Blends-Launches-AI-Powered-Fresh-Food-Vending-Machines-Announces-2-Million-Funding-and-Multi-Year-Partnership-with-Metrolinx.html" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>22. Daily Blends Launches AI-Powered Fresh Food Vending Machines - AiThority <a href="https://aithority.com/machine-learning/daily-blends-launches-ai-powered-fresh-food-vending-machines-announces-2-million-funding-and-multi-year-partnership-with-metrolinx/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>23. AI food machine maker secures $2M, will deploy in Canada rail stations - Kiosk Marketplace <a href="https://www.kioskmarketplace.com/news/ai-food-machine-maker-secures-2m-will-deploy-in-canada-rail-stations/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>24. dailyblends - Chef-prepared meals and curated snacks <a href="https://www.dailyblends.com/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>25. About Us - Deli Snack Vending <a href="https://www.montrealvending.com/about-us/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>26. Deli Snack Vending - Montreal Full Service Vending Machines <a href="https://www.montrealvending.com/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>27. Canvend: Office Coffee Services | Montreal Coffee Supplies <a href="https://www.canvend.ca/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>28. Convenient Capybara Vending Machine Services - Edmonton, Alberta <a href="https://www.convenient-capybara.com/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>29. What Is a Modern Vending Machine Capable Of in 2025? - Feel Good Snacks <a href="https://www.feelgoodsnacks.ca/post/what-is-a-modern-vending-machine-capable-of-in-2025-from-smart-payments-to-real-time-monitoring" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>30. The Future of Smart Vending: Trends to Watch in 2025 - OgmentO <a href="https://ogmento.io/blog/the-future-of-smart-vending-trends-to-watch-in-2025/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>31. Sustainable Food and Beverage Trends 2025 in the US & Canada - Innova Market Insights <a href="https://www.innovamarketinsights.com/trends/sustainable-food-and-beverage-in-the-us-and-canada-2025/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>32. What Makes Canteen Canada the Best Vending Service - Canteen Canada <a href="https://www.canteencanada.com/en/what-makes-canteen-canada-best-vending-service-team/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>33. 5 Trends to Know About Vending in 2025 - Vendon <a href="https://vendon.net/blog/5-trends-to-know-about-vending-in-2025/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>34. Vending Products - Canteen - Food Service Solutions <a href="https://www.canteen.com/vending/vending-products/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>35. Office Coffee Trends in 2025 [Infographic] - Crafty Delivers <a href="https://www.craftydelivers.com/insights/office-coffee-trends-2025" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>36. Selecta: Leading Food Tech & Distribution Across Europe <a href="https://www.selecta.com/int/en" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>37. Is the Vending Market Oversaturated? A 2025 Industry Analysis - Wider Matrix <a href="https://widermatrix.com/is-the-vending-market-oversaturated-a-2025-industry-analysis/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>38. Local SEO Guide 2025 | First Rank Local Search Strategies <a href="https://firstrank.ca/local-seo-guide/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>39. Ahrefs vs Semrush: Which SEO Tool is Better for Canadian Businesses in 2025? <a href="https://seovoyage.ca/resources/ahrefs-vs-semrush-canadian-businesses-2025" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>40. Best Keyword Research Tools for 2025: Ahrefs, SEMrush, and SE Ranking - SMA Marketing <a href="https://www.smamarketing.net/blog/best-keyword-research-tools-2025" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>41. is keyword difficulty will still matter (a important factor) in 2026? : r/DigitalMarketing - Reddit <a href="https://www.reddit.com/r/DigitalMarketing/comments/1ptprvy/is_keyword_difficulty_will_still_matter_a/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>42. How To Do Keyword Research And Boost SEO (2025) - Shopify Canada <a href="https://www.shopify.com/ca/blog/how-to-do-keyword-research" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>43. Average Cost per Click by Country [DATA] - WordStream <a href="https://www.wordstream.com/blog/average-cost-per-click" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>44. Pay Per Click Pricing - How Much Does PPC Cost in 2025? - Asset Digital Communications <a href="https://assetdigitalcom.com/pay-per-click-ppc-packages-pricing/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>45. Average Google Ads Cost per Click by Industry | 2025 Report - Focus Digital <a href="https://focus-digital.co/average-google-ads-cost-per-click-by-industry/" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>46. Pay-per-click (PPC) Advertising Market Size and Trends Research [2034] <a href="https://www.industryresearch.biz/market-reports/pay-per-click-ppc-advertising-market-115226" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>47. Facebook Ads CPM Benchmarks for Marketplaces in Canada (2025) - SuperAds AI <a href="https://www.superads.ai/facebook-ads-costs/cpm-cost-per-mille/marketplaces/canada" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                    <li>48. 2025 Advertising Shifts and Creative Intelligence PowerPoint Presentation - SlideServe <a href="https://www.slideserve.com/martechcube3/2025-advertising-shifts-and-creative-intelligence" class="text-amber-600 hover:text-amber-800">(link)</a></li>
                </ol>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-stone-900 text-stone-400 py-8 border-t border-stone-800">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-sm">Prepared by Jose Espinosa for Vending Machine Canada (<a href="https://vendingcanada.ca/" class="text-amber-500 hover:text-amber-400">vendingcanada.ca</a>). &copy; 2025 Strategic Counter-Strategy Report.</p>
        </div>
    </footer>

    <!-- LOGIC SCRIPT -->
    <script>
        // --- DATA STORAGE & CONFIGURATION ---

        const apiKey = "AIzaSyCj4NKq2C_kXLfH27vfq_l_Iu8XMtlaXkc"; 
        const modelName = "gemini-1.5-pro";
        const fallbackModelName = "gemini-pro";
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${apiKey}`;
        const fallbackApiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${fallbackModelName}:generateContent?key=${apiKey}`;

        const competitorData = [
            { name: "Canteen Canada", type: "National Operator", strength: "Full-service, Tech-enabled, National", notes: "Market Leader Baseline" },
            { name: "Aramark Refreshment", type: "National Operator", strength: "Corporate clients, Catering", notes: "Strong enterprise contracts" },
            { name: "BetterVending", type: "Niche/Healthy", strength: "Organic focus, Ontario-based", notes: "Healthy Niche Leader" },
            { name: "Healthy Max", type: "Niche/Healthy", strength: "Nutritional snacks, Combo machines", notes: "Toronto-centric" },
            { name: "Fresh Healthy Vending", type: "Niche/Healthy", strength: "Smart machines, Healthy options", notes: "Local focus" },
            { name: "Selecta Canada", type: "National Operator", strength: "Legacy brand, Regional presence", notes: "Snack & Beverage vending" },
            { name: "Fraser Valley Vending", type: "Regional", strength: "Snack/Drink/Frozen", notes: "Vancouver area" },
            { name: "Vend Pro", type: "Regional", strength: "Workplace vending", notes: "Ottawa B2B focus" },
            { name: "Kane's Distributing", type: "Distributor", strength: "Refurbished & New machines", notes: "Nationwide" },
            { name: "QM Distribution", type: "Distributor", strength: "Smart machines, AI monitoring", notes: "Nationwide coverage" },
            { name: "Royal Vendors", type: "Manufacturer", strength: "Beverage vending machines", notes: "Via distributors" },
            { name: "AMS", type: "Manufacturer", strength: "Snack/drink combo machines", notes: "Widely distributed" },
            { name: "Seaga Manufacturing", type: "Manufacturer", strength: "Reliable machines", notes: "Nationwide distributor" },
            { name: "Adaria Vending", type: "Regional Specialist", strength: "Adaria Dashboard™, Advanced Telemetry", notes: "National tech leader" },
            { name: "Daily Blends", type: "Regional Specialist", strength: "AI demand forecasting, Fresh meals", notes: "Toronto/GTA focus" },
            { name: "Deli-Snack Vending", type: "Regional Specialist", strength: "20-minute response time", notes: "Montreal/Quebec" },
            { name: "Convenient Capybara", type: "Regional Specialist", strength: "VIVE healthy vending", notes: "Edmonton/Alberta" }
        ];

        const searchData = {
            brand: {
                title: "Brand + Service Intent",
                desc: "Direct navigation queries indicating high brand familiarity.",
                color: 'rgba(217, 119, 6, 0.8)',
                items: [
                    { term: "Canteen Canada", score: 95 },
                    { term: "Canteen vending services", score: 88 },
                    { term: "Canteen micro-markets", score: 82 },
                    { term: "Canteen office coffee", score: 78 },
                    { term: "Canteen SmartService", score: 75 }
                ]
            },
            commercial: {
                title: "Commercial / Purchase Intent",
                desc: "High-conversion queries from decision makers looking for suppliers.",
                color: 'rgba(41, 37, 36, 0.8)',
                items: [
                    { term: "vending machine services Canada", score: 98 },
                    { term: "commercial vending provider", score: 92 },
                    { term: "office vending solutions", score: 85 },
                    { term: "vending machine supplier", score: 80 },
                    { term: "bulk vending purchase", score: 75 }
                ]
            },
            local: {
                title: "Location + Local SEO",
                desc: "Geo-specific queries. Critical for capturing regional market share.",
                color: 'rgba(87, 83, 78, 0.8)',
                items: [
                    { term: "vending machine Toronto", score: 95 },
                    { term: "office vending Ottawa", score: 90 },
                    { term: "vending services Montreal", score: 88 },
                    { term: "local vending machine service", score: 82 },
                    { term: "vending machines near me", score: 78 }
                ]
            },
            tech: {
                title: "Feature / Technology",
                desc: "Innovation-focused queries targeting modern solutions.",
                color: 'rgba(120, 113, 108, 0.8)',
                items: [
                    { term: "smart vending machines", score: 90 },
                    { term: "IoT vending solutions", score: 85 },
                    { term: "AI powered vending", score: 80 },
                    { term: "cashless vending payment", score: 75 },
                    { term: "connected retail hubs", score: 70 }
                ]
            },
            related: {
                title: "Related Services",
                desc: "Cross-sell opportunities for broader breakroom needs.",
                color: 'rgba(168, 162, 158, 0.8)',
                items: [
                    { term: "office coffee service", score: 88 },
                    { term: "breakroom supplies", score: 82 },
                    { term: "corporate catering", score: 78 },
                    { term: "facility management", score: 75 },
                    { term: "employee wellness programs", score: 70 }
                ]
            },
            generic: {
                title: "Generic Service Terms",
                desc: "Broad, non-branded search terms that Canteen targets for market capture and lead generation.",
                color: 'rgba(217, 119, 6, 0.8)',
                items: [
                    { term: "Micro Market Solutions", score: 95 },
                    { term: "Break Room Solutions", score: 90 },
                    { term: "Corporate Vending", score: 88 },
                    { term: "Commercial Vending Solutions", score: 85 },
                    { term: "Healthy Vending Machines", score: 82 },
                    { term: "Vending Machine Services", score: 80 },
                    { term: "Vending Service near me", score: 78 },
                    { term: "Vending services in Toronto", score: 75 },
                    { term: "Toronto Snack Vending", score: 72 },
                    { term: "Toronto Drink Vending", score: 70 }
                ]
            }
        };

        // PPC Strategies for VMC (Counter-Strategy)
        const ppcStrategies = {
            brand_attack: {
                title: "Competitor Brand Attack (Canteen)",
                group: "Canteen Branded Terms",
                keywords: ["Canteen Canada", "Canteen vending services", "Canteen micro-markets"],
                desc: "Goal: Steal high-intent traffic directly from Canteen searchers. Strategy: Highlight VMC's local, personalized service vs. Canteen's national, hands-off approach."
            },
            local_dominance: {
                title: "Local Service Dominance Campaign",
                group: "Geo-Targeted Services",
                keywords: ["vending machine services Toronto", "local office vending provider", "vending machines near me"],
                desc: "Goal: Dominate local search results. Strategy: Use geo-modifiers to assure users VMC offers faster service and local support that national chains cannot match."
            },
            healthy_disruption: {
                title: "Healthy Niche Disruption Campaign",
                group: "High-Quality Healthy Vending",
                keywords: ["best healthy vending Canada", "gourmet office snacks vending", "organic vending services"],
                desc: "Goal: Capture the high-value 'wellness' segment. Strategy: Position VMC as the premium, health-focused alternative, emphasizing fresh, curated selections."
            },
            quality_focus: {
                title: "Service Quality & Maintenance Focus",
                group: "Reliability & Service",
                keywords: ["reliable vending machine service", "vending machine repair response", "24/7 vending refill service"],
                desc: "Goal: Address pain points with national operators. Strategy: Directly tackle common complaints (slow refills, broken machines) by promoting VMC's quick response times and new equipment."
            },
            mro_industrial: {
                title: "Industrial MRO Edge Campaign",
                group: "Warehouse/Factory Vending",
                keywords: ["PPE vending machine", "Factory snack service", "Industrial tool vending"],
                desc: "Goal: Target high-growth manufacturing sectors. Strategy: Highlight 40% waste reduction claims and specialized industrial solutions."
            }
        };

        const nonBrandedStrategies = {
            commercial_intent: {
                title: "Commercial & Corporate Solutions",
                group: "High-Intent Solutions",
                keywords: ["Micro Market Solutions", "Break Room Solutions", "Corporate Vending", "Commercial Vending Solutions"],
                desc: "Goal: Capture businesses searching for comprehensive break room solutions. Strategy: Position VMC as the modern, flexible provider for high-end corporate and office needs, offering Micro Markets and custom break rooms."
            },
            local_geo_target: {
                title: "Local Service Geo-Targeting",
                group: "City & Local Services",
                keywords: ["Vending Service near me", "Vending services in (City)", "(City) Snack Vending", "(City) Drink vending"],
                desc: "Goal: Dominate local search results. Strategy: Emphasize VMC's local ownership, rapid service response (Guaranteed 4-Hour Fix), and regional knowledge to win against slow national chains."
            },
            product_niche: {
                title: "Healthy & Specialty Niche",
                group: "Product-Specific Demand",
                keywords: ["Healthy Vending Machines", "Vending machine Services", "Snack Vending", "Drink vending"],
                desc: "Goal: Capture product-specific and wellness demand. Strategy: Promote VMC's superior, unrestricted variety, especially healthy/specialty items, exploiting the 'Bottler Trap' weakness of competitors."
            }
        };

        // --- GLOBAL CHART VARIABLES & STATE ---
        let compChartInstance = null;
        let searchChartInstance = null;
        let currentPPCStrategy = 'brand_attack'; 

        // --- HELPER FUNCTIONS ---

        function showLoading(elementId) {
            const container = document.getElementById(elementId);
            container.innerHTML = `
                <div class="flex flex-col items-center justify-center p-8 text-stone-500">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-stone-500"></div>
                    <p class="mt-4 text-sm">Generating content...</p>
                </div>
            `;
        }
        
        function showLoadingSummary(elementId) {
            const container = document.getElementById(elementId);
            container.classList.remove('text-stone-200', 'italic', 'text-sm');
            container.innerHTML = `
                <div class="flex flex-col items-center justify-center p-4 text-stone-300">
                    <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-stone-300"></div>
                    <p class="mt-2 text-xs">Analyzing strategy...</p>
                </div>
            `;
        }

        async function fetchWithExponentialBackoff(fetcher, maxRetries = 5) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    return await fetcher();
                } catch (error) {
                    if (i === maxRetries - 1) throw error;
                    const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }
        
        // --- GEMINI INTEGRATION 1: AD COPY GENERATOR ---

        async function generateAdCopy() {
            console.log("generateAdCopy called");
            if (!apiKey) {
                console.log("No API key");
                const adCopyContainer = document.getElementById('adCopyResult');
                adCopyContainer.innerHTML = `
                    <div class="text-red-600 text-sm p-4 bg-red-50 rounded-lg">
                        Error: API Key is missing. Please replace 'const apiKey = "";' with your actual Gemini API Key to run this locally.
                    </div>
                `;
                return; 
            }

            const strategyKey = currentPPCStrategy;
            const strategy = ppcStrategies[strategyKey];
            const adCopyContainer = document.getElementById('adCopyResult');

            showLoading('adCopyResult');

            const systemPrompt = "You are a hyper-aggressive, B2B digital marketing copywriter for Vending Machine Canada (VMC). Your tone must be highly competitive, directly comparing VMC's local expertise and superior service against national chains. You MUST format your response with a clear 'Headline 1:', 'Headline 2:', and 'Description 1:' label on separate lines. Keep the headlines concise (max 30 chars) and the description focused (max 90 chars).";
            const userQuery = `SYSTEM INSTRUCTIONS: ${systemPrompt}

Generate compelling Google Ads copy for Vending Machine Canada based on the following VMC ad group strategy: "${strategy.desc}" The target keywords are: ${strategy.keywords.join(', ')}. Focus on: Local Ownership, Faster Service, and Better Snack Selection.`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
            };

            try {
                console.log("Making API call to Gemini");
                let response = await fetchWithExponentialBackoff(() => fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                }));
                
                // If primary model fails, try fallback model
                if (!response.ok && response.status === 404) {
                    console.log("Primary model not found, trying fallback model");
                    response = await fetchWithExponentialBackoff(() => fetch(fallbackApiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    }));
                }
                
                console.log("API response received:", response.status);
                
                if (!response.ok) {
                    console.error("API response not OK:", response.status, response.statusText);
                    const errorText = await response.text();
                    console.error("Error response body:", errorText);
                    throw new Error(`API request failed: ${response.status} ${response.statusText}`);
                }
                
                const result = await response.json();
                console.log("Parsed result:", result);
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text || "Error: Could not generate content.";
                console.log("Extracted text:", text);
                
                displayAdCopy(text);

            } catch (error) {
                console.error("Gemini API call failed:", error);
                adCopyContainer.innerHTML = `
                    <div class="text-red-600 text-sm p-4 bg-red-50 rounded-lg">
                        Error generating ad copy: API call failed or response was invalid. Check your API key and network connection.
                    </div>
                `;
            }
        }

        function displayAdCopy(text) {
            const adCopyContainer = document.getElementById('adCopyResult');
            const lines = text.split('\n').filter(line => line.trim() !== '');
            
            let headline1 = "N/A";
            let headline2 = "N/A";
            let description = "N/A";

            lines.forEach(line => {
                if (line.startsWith('Headline 1:')) {
                    headline1 = line.substring('Headline 1:'.length).trim();
                } else if (line.startsWith('Headline 2:')) {
                    headline2 = line.substring('Headline 2:'.length).trim();
                } else if (line.startsWith('Description 1:')) {
                    description = line.substring('Description 1:'.length).trim();
                }
            });

            adCopyContainer.innerHTML = `
                <div class="space-y-4">
                    <h5 class="text-sm font-semibold text-stone-700 mb-1 border-b border-stone-200 pb-2">Generated VMC Competitive Ad Copy:</h5>
                    
                    <!-- Ad Preview Card (Tailored for VMC) -->
                    <div class="p-4 rounded-lg ad-copy-preview shadow-lg">
                        <p class="text-xs ad-url mb-1 font-mono">vendingcanada.ca/local-service</p>
                        <p class="text-sm ad-headline leading-tight">${headline1} | ${headline2}</p>
                        <p class="text-sm text-stone-700 leading-snug">${description}</p>
                        <div class="mt-2 text-xs text-stone-500 flex justify-between">
                            <span>Ad Status: Active</span>
                        </div>
                    </div>

                    <div class="text-xs text-stone-500 italic mt-4">
                        <p>Generated ad copy preview for ${ppcStrategies[currentPPCStrategy].group}</p>
                    </div>
                </div>
            `;
        }

        // --- GEMINI INTEGRATION 2: EXECUTIVE SUMMARY GENERATOR ---

        async function generateExecutiveSummary() {
            console.log("generateExecutiveSummary called");
            if (!apiKey) {
                console.log("No API key");
                document.getElementById('brutallyHonestSummaryResult').innerHTML = `
                    <div class="text-red-500 text-xs p-2">
                        API Key not configured. Please set your Gemini API key in the script.
                    </div>
                `;
                return;
            }

            const container = document.getElementById('brutallyHonestSummaryResult');
            showLoadingSummary('brutallyHonestSummaryResult'); 

            // Read all page data
            const pageData = document.body.innerText;

            // Perform comprehensive web searches for current market data
            let webSearchResults = '';
            const searchQueries = [
                'Canadian vending machine market size 2025',
                'Canteen Canada market share 2025',
                'vending machine industry trends Canada 2025',
                'micro markets vs traditional vending Canada',
                'vending machine technology innovations 2025'
            ];

            try {
                const searchPromises = searchQueries.map(async (query) => {
                    try {
                        const response = await fetch(`https://api.duckduckgo.com/?q=${encodeURIComponent(query)}&format=json&no_html=1`);
                        const data = await response.json();
                        return {
                            query,
                            abstract: data.Abstract || '',
                            answer: data.Answer || '',
                            definition: data.Definition || '',
                            results: data.Results?.slice(0, 3) || [] // Get top 3 results
                        };
                    } catch (error) {
                        console.error(`Search failed for "${query}":`, error);
                        return { query, error: 'Search failed' };
                    }
                });

                const searchResults = await Promise.all(searchPromises);
                
                // Format search results for AI consumption
                webSearchResults = searchResults.map(result => 
                    `Query: "${result.query}"\n` +
                    `Abstract: ${result.abstract}\n` +
                    `Answer: ${result.answer}\n` +
                    `Definition: ${result.definition}\n` +
                    `Top Results: ${result.results.map(r => r.Text || r.Title || '').join('; ')}\n` +
                    `---\n`
                ).join('');

                console.log('Comprehensive web search results:', webSearchResults);

            } catch (error) {
                console.error('Web search failed:', error);
                webSearchResults = 'Web search unavailable. Analysis based on document data only.';
            }

            const systemPrompt = "You are a professional business analyst providing evidence-based market analysis. Your analysis MUST be grounded in the provided document data and verified against current web search results. For every claim you make, cite specific data points from the document or web search results. Avoid speculation, assumptions, or unverified claims. Structure your response with: 1) Data validation section citing sources, 2) Market reality assessment based on verified facts, 3) Strategic recommendations supported by data, 4) Risk assessment with evidence. Use phrases like 'According to [source]' and 'Data shows that...' to maintain credibility.";
            
            const userQuery = `SYSTEM INSTRUCTIONS: ${systemPrompt}

ANALYZE THIS COMPREHENSIVE MARKET DATA:

DOCUMENT DATA: ${pageData.substring(0, 8000)}

RECENT WEB SEARCH RESULTS (2025 data):
${webSearchResults}

REQUIRED: Provide a data-driven executive summary that:
1. VALIDATES all key claims from the document against web search data
2. CITATION REQUIREMENT: Every major point must reference specific data sources
3. MARKET REALITY: Report only verified market facts, not assumptions
4. STRATEGIC ANALYSIS: Base recommendations on confirmed market data
5. COMPETITIVE POSITIONING: Use real market share and trend data
6. ACTION ITEMS: Suggest only evidence-based next steps

Format as a professional business report with clear data citations throughout.`;
            
            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
            };

            try {
                console.log("Making API call to Gemini for summary");
                let response = await fetchWithExponentialBackoff(() => fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                }));
                
                // If primary model fails, try fallback model
                if (!response.ok && response.status === 404) {
                    console.log("Primary model not found, trying fallback model");
                    response = await fetchWithExponentialBackoff(() => fetch(fallbackApiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    }));
                }
                
                console.log("Summary API response received:", response.status);
                
                if (!response.ok) {
                    console.error("API response not OK:", response.status, response.statusText);
                    const errorText = await response.text();
                    console.error("Error response body:", errorText);
                    throw new Error(`API request failed: ${response.status} ${response.statusText}`);
                }
                
                const result = await response.json();
                console.log("Summary parsed result:", result);
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text || "Error: Could not generate content.";
                console.log("Summary extracted text:", text);
                
                displayBrutallyHonestSummary(text);

            } catch (error) {
                console.error("Gemini API call failed for summary:", error);
                container.innerHTML = `
                    <div class="text-red-500 text-xs p-2">
                        API Error: ${error.message}. Check your API key and network connection.
                    </div>
                `;
            }
        }

        function displayExecutiveSummary(summaryText) {
            const container = document.getElementById('executiveSummaryResult');
            container.classList.remove('italic', 'text-sm', 'text-stone-400');
            container.innerHTML = `<p class="text-lg font-medium text-stone-50 leading-relaxed">${summaryText}</p>`;
        }

        function displayBrutallyHonestSummary(summaryText) {
            // Process the AI-generated summary to add proper formatting for data citations
            const formattedSummary = summaryText
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // Bold text
                .replace(/^### (.*$)/gim, '<h4 class="text-xl font-bold text-stone-800 mt-6 mb-3">$1</h4>') // Section headers
                .replace(/^## (.*$)/gim, '<h3 class="text-2xl font-bold text-stone-800 mt-8 mb-4">$1</h3>') // Main headers
                .replace(/^# (.*$)/gim, '<h2 class="text-3xl font-bold text-stone-800 mb-4">$1</h2>') // Title
                .replace(/\n\n/g, '</p><p class="text-stone-700 leading-relaxed mb-4">') // Paragraph breaks
                .replace(/\n/g, '<br>') // Line breaks
                .replace(/According to ([^:]+):/g, '<em class="text-amber-700">According to $1:</em>') // Citation highlighting
                .replace(/Data shows that/g, '<strong class="text-green-700">Data shows that</strong>') // Data reference highlighting
                .replace(/Source: ([^\n]+)/g, '<div class="bg-stone-50 p-2 rounded text-sm text-stone-600 mt-2"><strong>Source:</strong> $1</div>'); // Source formatting

            const formattedHTML = `
                <div class="text-left space-y-6">
                    <h2 class="text-3xl font-bold text-stone-800 mb-4">EXECUTIVE SUMMARY: DATA-DRIVEN MARKET ANALYSIS</h2>
                    <div class="text-stone-600 border-b border-stone-300 pb-4 mb-6">
                        <p><strong>TO:</strong> Evan (Owner, Vending Machine Canada)</p>
                        <p><strong>FROM:</strong> Business Analyst</p>
                        <p><strong>DATE:</strong> ${new Date().toISOString().split('T')[0]}</p>
                        <p><strong>SUBJECT:</strong> Evidence-Based Market Analysis & Strategic Recommendations</p>
                        <p class="text-xs text-stone-500 mt-2">This analysis validates all claims against current web search data and cites specific sources for credibility.</p>
                    </div>
                    <div class="prose prose-stone max-w-none">
                        <p class="text-stone-700 leading-relaxed mb-4">${formattedSummary}</p>
                    </div>
                    <div class="mt-8 p-4 bg-amber-50 border border-amber-200 rounded-lg">
                        <h4 class="text-amber-800 font-semibold mb-2">📊 Analysis Methodology</h4>
                        <p class="text-amber-700 text-sm">This executive summary is generated from comprehensive web research across 5 key market queries, validated against document data, and cites specific sources for every major claim. All recommendations are evidence-based and time-stamped for current market conditions.</p>
                    </div>
                </div>
            `;

            const container = document.getElementById('brutallyHonestSummaryResult');
            container.innerHTML = formattedHTML;
        }

        function copyBrutallyHonestSummary() {
            const container = document.getElementById('brutallyHonestSummaryResult');
            const text = container.innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert('Summary copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }

        // --- CORE FUNCTIONS ---

        function initCompetitorChart() {
            const ctx = document.getElementById('competitorChart').getContext('2d');
            
            const typeCounts = {};
            competitorData.forEach(c => {
                let type = c.type;
                typeCounts[type] = (typeCounts[type] || 0) + 1;
            });

            const labels = Object.keys(typeCounts);
            const data = Object.values(typeCounts);

            compChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: ['#d97706', '#78716c', '#a8a29e', '#d6d3d1', '#f5f5f4', '#92400e'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                boxWidth: 12,
                                font: { size: 11 }
                            }
                        }
                    }
                }
            });
        }

        function filterCompetitors(type) {
            document.querySelectorAll('.comp-filter-btn').forEach(btn => {
                if (btn.textContent.includes(type) || (type === 'All' && btn.textContent === 'All Types')) {
                    btn.classList.add('bg-stone-800', 'text-white');
                    btn.classList.remove('bg-white', 'text-stone-600', 'border', 'border-stone-200');
                } else {
                    btn.classList.remove('bg-stone-800', 'text-white');
                    btn.classList.add('bg-white', 'text-stone-600', 'border', 'border-stone-200');
                }
            });

            const grid = document.getElementById('competitorGrid');
            grid.innerHTML = '';

            const filtered = type === 'All' 
                ? competitorData 
                : competitorData.filter(c => c.type === type);

            filtered.forEach(c => {
                const card = document.createElement('div');
                card.className = "bg-white p-5 rounded-lg border border-stone-200 hover:border-amber-500 transition-colors shadow-sm";
                card.innerHTML = `
                    <h5 class="font-bold text-stone-900 mb-1">${c.name}</h5>
                    <p class="text-xs font-bold text-amber-600 mb-2">${c.type}</p>
                    <p class="text-xs text-stone-600 italic leading-relaxed">${c.strength}</p>
                    <p class="text-xs text-stone-500 italic mt-1">"${c.notes}"</p>
                `;
                grid.appendChild(card);
            });
        }

        function initSearchChart() {
            const ctx = document.getElementById('searchChart').getContext('2d');
            searchChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [{
                        data: [],
                        backgroundColor: 'rgba(217, 119, 6, 0.8)',
                        borderRadius: 4
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { display: false },
                        y: { 
                            grid: { display: false },
                            ticks: { font: { size: 11 } }
                        }
                    }
                }
            });
        }

        function loadSearchCategory(catKey) {
            document.querySelectorAll('.search-tab').forEach(t => {
                t.classList.remove('border-amber-600', 'text-stone-900');
                if(t.dataset.cat === catKey) t.classList.add('border-amber-600', 'text-stone-900');
            });

            const data = searchData[catKey];
            
            document.getElementById('searchCatTitle').innerText = data.title;
            document.getElementById('searchCatDesc').innerText = data.desc;

            const list = document.getElementById('searchTermList');
            list.innerHTML = '';
            data.items.forEach(item => {
                const li = document.createElement('li');
                li.className = "flex justify-between items-center text-sm p-2 hover:bg-white rounded transition-colors";
                li.innerHTML = `
                    <span class="text-stone-700 font-medium">"${item.term}"</span>
                    <span class="text-amber-600 font-bold">${item.score}%</span>
                `;
                list.appendChild(li);
            });

            if (searchChartInstance) {
                searchChartInstance.data.labels = data.items.map(i => i.term.length > 20 ? i.term.substring(0,20)+'...' : i.term);
                searchChartInstance.data.datasets[0].data = data.items.map(i => i.score);
                searchChartInstance.data.datasets[0].backgroundColor = data.color;
                searchChartInstance.update();
            }
        }

        function renderPPC(strategyKey) {
            currentPPCStrategy = strategyKey;
            document.querySelectorAll('.ppc-btn').forEach(btn => {
                btn.classList.remove('bg-stone-900', 'text-white', 'shadow-xl', 'scale-105');
                btn.classList.add('bg-white', 'text-stone-800');
                if(btn.dataset.key === strategyKey) btn.classList.add('bg-stone-900', 'text-white', 'shadow-xl', 'scale-105');
            });

            const s = ppcStrategies[strategyKey];
            const container = document.getElementById('ppcContent');
            
            container.style.opacity = '0';
            
            setTimeout(() => {
                container.innerHTML = `
                    <div class="mb-6">
                        <span class="text-xs font-bold text-amber-600 uppercase tracking-widest">Attack Vector</span>
                        <h4 class="text-2xl font-bold text-stone-900 mt-1">${s.title}</h4>
                        <p class="text-stone-500 mt-2 text-sm italic">${s.desc}</p>
                    </div>
                    <div class="bg-stone-50 p-6 rounded-xl border border-stone-200">
                        <h5 class="text-xs font-bold text-stone-400 uppercase mb-3">High-Intent Keywords</h5>
                        <div class="flex flex-wrap gap-2 mb-6">
                            ${s.keywords.map(k => `<span class="bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-xs font-medium">${k}</span>`).join('')}
                        </div>
                        <button onclick="generateAdCopy()" class="w-full py-4 btn-enhanced font-bold rounded-xl">
                            Generate Ad Copy
                        </button>
                    </div>
                    <div id="adCopyResult" class="mt-6 min-h-[150px] flex items-center justify-center border-2 border-dashed border-stone-200 rounded-xl">
                        <p class="text-stone-400 text-sm">Click "Generate Ad Copy" to create AI-powered ads</p>
                    </div>
                `;
                container.style.opacity = '1';
            }, 300);
        }

        function renderNonBranded(strategyKey) {
            document.querySelectorAll('.nonbranded-btn').forEach(btn => {
                btn.classList.remove('bg-stone-900', 'text-white', 'shadow-xl', 'scale-105');
                btn.classList.add('bg-white', 'text-stone-800');
                if(btn.dataset.key === strategyKey) btn.classList.add('bg-stone-900', 'text-white', 'shadow-xl', 'scale-105');
            });

            const s = nonBrandedStrategies[strategyKey];
            const container = document.getElementById('nonBrandedContent');
            
            container.style.opacity = '0';
            
            setTimeout(() => {
                container.innerHTML = `
                    <div class="mb-6">
                        <span class="text-xs font-bold text-amber-600 uppercase tracking-widest">VMC's Ad Group Strategy</span>
                        <h4 class="text-2xl font-bold text-stone-900 mt-1">${s.title}</h4>
                        <p class="text-stone-500 mt-2 text-sm italic">${s.desc}</p>
                    </div>
                    <div class="bg-stone-50 p-6 rounded-xl border border-stone-200">
                        <h5 class="text-sm font-bold text-stone-700 mb-3">Target Non-Branded Keywords</h5>
                        <div class="flex flex-wrap gap-2 mb-6">
                            ${s.keywords.map(k => `<span class="bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-xs font-medium">${k}</span>`).join('')}
                        </div>
                        <button onclick="generateAdCopy()" class="w-full py-4 btn-enhanced font-bold rounded-xl">
                            Generate Ad Copy
                        </button>
                    </div>
                    <div id="adCopyResult" class="mt-6 min-h-[150px] flex items-center justify-center border-2 border-dashed border-stone-200 rounded-xl">
                        <p class="text-stone-400 text-sm">Click "Generate Ad Copy" to create AI-powered ads</p>
                    </div>
                `;
                container.style.opacity = '1';
            }, 300);
        }

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // Test API connectivity
        async function testApiConnection() {
            try {
                const testPayload = {
                    contents: [{ parts: [{ text: "Hello, just testing API connectivity. Please respond with 'API is working'." }] }],
                };
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(testPayload)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    const text = result.candidates?.[0]?.content?.parts?.[0]?.text || "No response";
                    console.log("API Test successful:", text);
                    alert("API connection successful!");
                } else {
                    console.error("API Test failed:", response.status, response.statusText);
                    alert(`API test failed: ${response.status} ${response.statusText}`);
                }
            } catch (error) {
                console.error("API Test error:", error);
                alert(`API test error: ${error.message}`);
            }
        }
        window.addEventListener('DOMContentLoaded', () => {
            initCompetitorChart();
            filterCompetitors('All'); 
            
            initSearchChart();
            loadSearchCategory('brand'); 

            renderPPC('brand_attack'); 
        });

    </script>
</body>
</html>
